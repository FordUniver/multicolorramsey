% The Geometric Lemma section - moments lemma, geometric lemma, and key lemma proof
% This section contains the geometric tools needed to prove the key lemma


% ============================================================================
% MOMENTS LEMMA
% ============================================================================

% [LEMMA] Moments lemma: non-negative expectations
% Source: blueprint/paper/sections/section_the_proof_of_the_key_lemma.tex line 16-19 (\begin{lemma}\label{lem:moments})
% Deprecated blueprint: deprecated/03_The_Geometric_Lemma.tex line 3-13 (\begin{lemma}[Moments Lemma])
% Lean status: ✓ Implemented as `moments` in Basic.lean
% Label: lem:moments
% Dependencies: def:inner-product-finite, def:uniform-product
% TODO: Add moments lemma for i.i.d. random variables U, U'
% TODO: Add statement E[⟨σ₁(U),σ₁(U')⟩^ℓ₁ ⋯ ⟨σᵣ(U),σᵣ(U')⟩^ℓᵣ] ≥ 0
% TODO: Add proof using positive semidefiniteness

% [LEMMA] Tensor product formulation for moments
% Source: blueprint/paper/sections/section_the_proof_of_the_key_lemma.tex (proof of moments lemma)
% No deprecated blueprint equivalent
% Lean status: ✓ Partially used in Basic.lean moments proof
% Label: lem:tensor-moments
% Dependencies: def:inner-product-finite, lem:moments
% TODO: Add tensor product Z = σₐ₁(U) ⊗ ⋯ ⊗ σₐₗ(U') construction
% TODO: Add E[ZZ*] ≥ 0 positive semidefiniteness result

% ============================================================================
% SPECIAL FUNCTION LEMMAS
% ============================================================================

% [LEMMA] Special function lemma part 1: upper bound
% Source: blueprint/paper/sections/section_the_proof_of_the_key_lemma.tex line 43 (\begin{lemma}\label{lem:special:function})
% Deprecated blueprint: deprecated/03_The_Geometric_Lemma.tex line 37-69 (\begin{lemma}[Special-function lemma (Part 1)])
% Lean status: ✓ Implemented as `specialFunctionE` in Basic.lean
% Label: lem:special:function:1
% Dependencies: def:f, lem:coshsqrt-bd-pos
% TODO: Add bound f(x) ≤ 3ʳ·r·exp(∑ᵢ √(xᵢ + 3r)) for all x

% [LEMMA] Special function lemma part 2: lower bound when negative
% Source: blueprint/paper/sections/section_the_proof_of_the_key_lemma.tex line 43 (\begin{lemma}\label{lem:special:function})
% Deprecated blueprint: deprecated/03_The_Geometric_Lemma.tex line 70-97 (\begin{lemma}[Special-function lemma (Part 2)])
% Lean status: ✓ Implemented as `specialFunctionEc` in Basic.lean
% Label: lem:special:function:2
% Dependencies: def:f, lem:coshsqrt-bd-neg
% TODO: Add bound f(x) ≥ 3^{-4r} for x with ∃i: xᵢ < -3r

% ============================================================================
% GEOMETRIC LEMMA
% ============================================================================

% [LEMMA] Geometric lemma: main probabilistic bound
% Source: blueprint/paper/sections/section_the_proof_of_the_key_lemma.tex line 7-10 (\begin{lemma}\label{lem:lambda})
% Deprecated blueprint: deprecated/03_The_Geometric_Lemma.tex line 98-108 (\begin{lemma}[Geometric lemma])
% Lean status: ✓ Implemented as `geometric` in GeometricLemma.lean
% Label: lem:lambda (source) / lem:geometric (blueprint)
% Dependencies: lem:moments, lem:special:function:1, lem:special:function:2, lem:integral-exp-decay
% TODO: Add geometric lemma for i.i.d. random variables U, U' and functions σ₁,...,σᵣ
% TODO: Add existence of λ ≥ -1 and i ∈ [r] with probability bound
% TODO: Add Pr(⟨σᵢ(U),σᵢ(U')⟩ ≥ λ ∧ ∀j≠i: ⟨σⱼ(U),σⱼ(U')⟩ ≥ -1) ≥ β e^{-C√(λ+1)}

% ============================================================================
% INTEGRATION THEORY
% ============================================================================

% [LEMMA] Basic integral bounds for exponential decay
% Source: blueprint/paper/sections/section_the_proof_of_the_key_lemma.tex (geometric lemma proof)
% No deprecated blueprint equivalent
% Lean status: ✓ Implemented as `integral_rpow_mul_exp_neg_rpow_le` in Integrals.lean
% Label: lem:integral-exp-decay
% Dependencies: lem:fubini-finite, lem:exp-estimates
% TODO: Add ∫₀^∞ x^a e^{-b√x} dx bounds for geometric lemma integration

% [LEMMA] Integration by parts for special functions
% Source: blueprint/paper/sections/section_the_proof_of_the_key_lemma.tex (geometric lemma proof)
% No deprecated blueprint equivalent
% Lean status: ✓ Partially implemented in Integrals.lean
% Label: lem:integration-by-parts-special
% Dependencies: lem:integral-bounds
% TODO: Add integration techniques for ∫ f(x₁,...,xᵣ) dx₁...dxᵣ type integrals

% [LEMMA] Substitution formulas for geometric lemma
% Source: blueprint/paper/sections/section_the_proof_of_the_key_lemma.tex (geometric lemma proof)
% No deprecated blueprint equivalent
% Lean status: ✓ Used in GeometricLemma.lean proof
% Label: lem:substitution-geometric
% Dependencies: lem:fubini-finite
% TODO: Add change of variables for probability density calculations

% ============================================================================
% KEY LEMMA PROOF
% ============================================================================

% [PROOF] Proof of key lemma using geometric lemma
% Source: blueprint/paper/sections/section_the_proof_of_the_key_lemma.tex (proof after geometric lemma)
% Deprecated blueprint: deprecated/04_The_Book_Theorem.tex line 22-101 (proof of key lemma)
% Lean status: ✓ Implemented as `key` in KeyLemma.lean
% Uses: lem:moments, lem:geometric
% Dependencies: lem:geometric, def:p, def:colour-neighborhood
% TODO: Add proof constructing functions σᵢ from neighborhood sets
% TODO: Add application of geometric lemma to obtain vertex x and parameter λ
% TODO: Add verification of key lemma bounds using geometric lemma output